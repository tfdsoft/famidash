#define putinbank(bank) __attribute__((section(bank),retain))

#define embed(name, symbol, bank) \
__attribute__((section(bank),retain)) __asm__ ( \
    ".section "bank",\"a\",@progbits\n"\
    #symbol": \n" \
    ".incbin \"./src/chr/"name"\" \n" \
); \
extern const unsigned char symbol[] 



#define chr_bank_0 ".prg_rom_32"
#define chr_bank_1 ".prg_rom_33"
#define chr_bank_2 ".prg_rom_34"
#define chr_bank_3 ".prg_rom_35"

#define music_bank_0 ".prg_rom_36"
#define music_bank_1 ".prg_rom_37"
#define music_bank_2 ".prg_rom_38"
#define music_bank_3 ".prg_rom_39"

#define dpcm_bank_0 ".prg_rom_40"
#define dpcm_bank_1 ".prg_rom_40"
#define dpcm_bank_2 ".prg_rom_40"
#define dpcm_bank_3 ".prg_rom_40"


embed("General.chr", chr_tiles_global, chr_bank_0); // 1.00 kb
embed("Grid.chr", chr_tiles_grid, chr_bank_0);      // 0.25 kb
embed("Cross.chr", chr_tiles_cross, chr_bank_0);    // 0.25 kb
embed("Brick.chr", chr_tiles_brick, chr_bank_0);    // 0.25 kb
embed("Black.chr", chr_tiles_black, chr_bank_0);    // 0.25 kb





putinbank(".prg_rom_fixed_lo") const unsigned char test_palette[16]={
    0x14,0x0f,0x04,0x30,
    0x14,0x03,0x13,0x30,
    0x14,0x0f,0x26,0x30,
    0x14,0x0f,0x0f,0x0f
    };



putinbank(".prg_rom_fixed_lo") const unsigned char test_header[1005]={
    0x30,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xd5,0xd7,0xc0,0xc2,0xc4,
    0xc6,0xc8,0xca,0xcd,0xcf,0xd1,0xd3,0xd5,0xd7,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcd,
    0xcf,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xf4,0xf6,0xc1,0xc3,0xc5,
    0xc7,0xc9,0xcb,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xc1,0xc3,0xc5,0xc7,0xc9,0xcb,0xec,
    0xee,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xf8,0xfa,0xe0,0xe2,0xe4,
    0xe6,0xe8,0xea,0xd8,0xda,0xdc,0xde,0xf8,0xfa,0xe0,0xe2,0xe4,0xe6,0xe8,0xea,0xd8,
    0xda,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xfc,0xfe,0xcc,0xce,0xd0,
    0xd2,0xd4,0xd6,0xd9,0xdb,0xdd,0xdf,0xfc,0xfe,0xcc,0xce,0xd0,0xd2,0xd4,0xd6,0xd9,
    0xdb,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0x54,0x56,0x54,0x5e,0xd1,
    0xd3,0xd5,0xd7,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcd,0xcf,0xd1,0xd3,0xd5,0xd7,0xc0,
    0xc2,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0x55,0x57,0x51,0x5b,0xf0,
    0xf2,0xf4,0xf6,0xc1,0xc3,0xc5,0xc7,0xc9,0xcb,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xc1,
    0xc3,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xe8,0x8c,0x8e,0x90,0x92,
    0xde,0xf8,0xfa,0xe0,0xe2,0xe4,0xe6,0xe8,0xea,0xd8,0xda,0xdc,0xde,0xf8,0x8c,0x8e,
    0x90,0x65,0x67,0x65,0x67,0x65,0x67,0x65,0x67,0x65,0x63,0xd4,0x8d,0x8f,0x91,0x93,
    0xdf,0xfc,0xfe,0xcc,0xce,0xd0,0xd2,0xd4,0xd6,0xd9,0xdb,0xdd,0xdf,0xfc,0x8d,0x8f,
    0x91,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcd,0xcf,0xd1,0xd3,0xd5,0xac,0xae,0xb0,0xb2,
    0xc6,0xc8,0xca,0xcd,0xcf,0xd1,0xd3,0xd5,0xd7,0xc0,0xc2,0xc4,0xc6,0xc8,0xac,0xae,
    0xb0,0xc1,0xc3,0xc5,0xc7,0xc9,0xcb,0xec,0xee,0xf0,0xf2,0xf4,0xad,0xaf,0xb1,0xb3,
    0xc7,0xc9,0xcb,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xc1,0x70,0x78,0x7e,0xc9,0xad,0xaf,
    0xb1,0xe0,0xe2,0xe4,0xe6,0xe8,0xea,0xd8,0xda,0xdc,0xde,0xf8,0xfa,0xe0,0xe2,0xe4,
    0xe6,0xe8,0xea,0xd8,0xda,0xdc,0xde,0xf8,0xfa,0xe0,0x74,0x60,0x62,0x54,0x56,0x50,
    0x5a,0xcc,0xce,0xd0,0xd2,0xd4,0xd6,0xd9,0xdb,0xdd,0xdf,0xfc,0xfe,0xcc,0xce,0xd0,
    0xd2,0xd4,0xd6,0xd9,0xdb,0xdd,0xdf,0xfc,0xfe,0xcc,0x74,0x69,0x6b,0x55,0x57,0x55,
    0x5f,0xcd,0xcf,0xd1,0xd3,0xd5,0xd7,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcd,0xcf,0xd1,
    0xd3,0xd5,0xd7,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcd,0x74,0x68,0x6a,0xd5,0xd7,0xc0,
    0xc2,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xc1,0xc3,0xc5,0xc7,0xc9,0xcb,0xec,0xee,0xf0,
    0xf2,0xf4,0xf6,0xc1,0x70,0x78,0x7e,0xc9,0xcb,0xec,0x74,0x69,0x6b,0xf4,0xf6,0xc1,
    0xc3,0xd8,0xda,0x10,0x12,0x10,0x12,0xe0,0xe2,0xe4,0xe6,0xe8,0xea,0xd8,0xda,0xdc,
    0xde,0xf8,0xfa,0xe0,0x74,0x60,0x62,0xe8,0xea,0xd8,0x74,0x68,0x6a,0xf8,0xfa,0xe0,
    0xe2,0x78,0x78,0x11,0x13,0x11,0x13,0x78,0x30,0x02,0x7e,0xd4,0xd6,0xd9,0xdb,0xdd,
    0xdf,0xfc,0xfe,0xcc,0x74,0x69,0x6b,0xd4,0xd6,0xd9,0x74,0x69,0x6b,0xfc,0xfe,0xcc,
    0xce,0x64,0x66,0x64,0x66,0x64,0x66,0x64,0x66,0x64,0x62,0xd5,0xd7,0xc0,0xc2,0xc4,
    0xc6,0xc8,0xca,0xcd,0x74,0x68,0x6a,0xd5,0xd7,0xc0,0x74,0x68,0x6a,0xc8,0xca,0xcd,
    0xcf,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xf4,0xf6,0xc1,0x70,0x78,
    0x7e,0xc9,0xcb,0xec,0x74,0x69,0x6b,0xf4,0xf6,0xc1,0x74,0x69,0x6b,0xc9,0xcb,0xec,
    0xee,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xf8,0xfa,0xe0,0x74,0x60,
    0x62,0xe8,0xea,0xd8,0x74,0x68,0x6a,0xf8,0xfa,0xe0,0x74,0x68,0x6a,0xe8,0xea,0xd8,
    0xda,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xfc,0xfe,0xcc,0x74,0x69,
    0x6b,0xd4,0xd6,0xd9,0x74,0x69,0x6b,0xfc,0xfe,0xcc,0x74,0x69,0x6b,0xd4,0xd6,0xd9,
    0xdb,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xc8,0xca,0xcd,0x74,0x68,
    0x6a,0xd5,0xd7,0xc0,0x74,0x68,0x6a,0xc8,0xca,0xcd,0x74,0x68,0x6a,0xd5,0xd7,0xc0,
    0xc2,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xc9,0xcb,0xec,0x74,0x69,
    0x6b,0xf4,0xf6,0xc1,0x74,0x69,0x6b,0xc9,0xcb,0xec,0x74,0x69,0x6b,0xf4,0xf6,0xc1,
    0xc3,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6e,0x6c,0x6a,0xe8,0xea,0xd8,0x74,0x68,
    0x6a,0xf8,0xfa,0xe0,0x74,0x68,0x6a,0xe8,0xea,0xd8,0x74,0x68,0x6a,0xf8,0xfa,0xe0,
    0xe2,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6f,0x6d,0x6b,0xb5,0x30,0x02,0x74,0x69,
    0x6b,0xb5,0x30,0x02,0x74,0x69,0x6b,0xb5,0x30,0x02,0x74,0x69,0x6b,0xb5,0x30,0x03,
    0x00,0x02,0x04,0x06,0x08,0x0a,0x0c,0x0e,0x00,0x02,0x04,0x06,0x08,0x0a,0x0c,0x0e,
    0x00,0x02,0x04,0x06,0x08,0x0a,0x0c,0x0e,0x00,0x02,0x04,0x06,0x08,0x0a,0x0c,0x0e,
    0x01,0x03,0x05,0x07,0x09,0x0b,0x0d,0x0f,0x01,0x03,0x05,0x07,0x09,0x0b,0x0d,0x0f,
    0x01,0x03,0x05,0x07,0x09,0x0b,0x0d,0x0f,0x01,0x03,0x05,0x07,0x09,0x0b,0x0d,0x0f,
    0x10,0x12,0x14,0x16,0x18,0x1a,0x1c,0x1e,0x10,0x12,0x14,0x16,0x18,0x1a,0x1c,0x1e,
    0x10,0x12,0x14,0x16,0x18,0x1a,0x1c,0x1e,0x10,0x12,0x14,0x16,0x18,0x1a,0x1c,0x1e,
    0x11,0x13,0x15,0x17,0x19,0x1b,0x1d,0x1f,0x11,0x13,0x15,0x17,0x19,0x1b,0x1d,0x1f,
    0x11,0x13,0x15,0x17,0x19,0x1b,0x1d,0x1f,0x11,0x13,0x15,0x17,0x19,0x1b,0x1d,0x1f,
    0x20,0x22,0x24,0x26,0x28,0x2a,0x2c,0x2e,0x20,0x22,0x24,0x26,0x28,0x2a,0x2c,0x2e,
    0x20,0x22,0x24,0x26,0x28,0x2a,0x2c,0x2e,0x20,0x22,0x24,0x26,0x28,0x2a,0x2c,0x2e,
    0x21,0x23,0x25,0x27,0x29,0x2b,0x2d,0x2f,0x21,0x23,0x25,0x27,0x29,0x2b,0x2d,0x2f,
    0x21,0x23,0x25,0x27,0x29,0x2b,0x2d,0x2f,0x21,0x23,0x25,0x27,0x29,0x2b,0x2d,0x2f,
    0xaa,0xaa,0x22,0x00,0x30,0x04,0xaa,0xaa,0x2a,0x02,0x00,0x30,0x09,0x80,0xa0,0x00,
    0x30,0x04,0x20,0x88,0x00,0xaa,0xaa,0x22,0x80,0x00,0x22,0x88,0x00,0xaa,0xaa,0x22,
    0x88,0x00,0x22,0x88,0x00,0x55,0x30,0x07,0x05,0x30,0x07,0x30,0x00
};



//putinbank(music_bank)
//    __attribute__((leaf)) __asm__ (
//        ".section prg_rom_1 \n"
//        ".include \"./src/famistudio/music.s\"\n"
//    );

putinbank(".prg_rom_2") const unsigned char dpcm[] = {
    #embed "./famistudio/music_bank0.dmc"
};

//putinbank(".prg_rom_3")
//    const unsigned char dpcm[] = {
//        #embed "./famistudio/music_bank1.dmc"
//    };