banked(startup_bank.data) const u8 pal_startup[] = {
    0x0e, 0x2d, 0x00, 0x20,
    0x0f, 0x01, 0x11, 0x21,
    0x0f, 0x02, 0x12, 0x22,
    0x0f, 0x03, 0x13, 0x23,
};
banked(startup_bank.data) const u8 pal_warning[] = {
    0x0f,0x00,0x3d,0x30,
    0x0f,0x0f,0x16,0x26,
    0x0f,0x0f,0x0f,0x0f,
    0x0f,0x0f,0x0f,0x0f
};

banked(startup_bank.data) const u8 nt_startup[] = {
    0x01,0x00,0x01,0xfe,0x00,0x01,0x45,0x80,0x81,0x00,0x01,0x12,0xc0,0x00,0x01,0x08,
    0x82,0x83,0x84,0x85,0x00,0x01,0x0d,0xc1,0x00,0xc2,0xc3,0xc4,0x00,0x01,0x07,0x86,
    0x87,0x88,0x89,0x00,0x01,0x09,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0x00,0xcb,0xcc,0xcd,
    0x00,0x01,0x06,0x8a,0x8b,0x8c,0x8d,0x00,0x00,0x8e,0x8f,0x90,0x91,0x92,0x93,0x94,
    0x95,0x00,0xce,0xcf,0xd0,0xd1,0x00,0x01,0x0d,0x96,0x97,0x98,0x99,0x9a,0x9b,0x9c,
    0x9d,0x9e,0x9f,0xa0,0xa1,0xa2,0x00,0xd2,0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,
    0xdb,0xdc,0xdd,0xde,0x00,0x01,0x04,0x96,0x97,0xa3,0xa4,0xa5,0x00,0x01,0x07,0xdf,
    0xe0,0xe1,0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,0xeb,0xec,0x00,0x01,0x04,
    0x96,0x97,0xa6,0xa7,0xa8,0x00,0x01,0x0c,0xee,0xef,0xf0,0xf1,0xf2,0xf3,0xf4,0xf5,
    0xf6,0xed,0x00,0x01,0x03,0xa9,0xaa,0x00,0x00,0xab,0x00,0x01,0x0e,0xf7,0xf8,0x00,
    0x01,0xfe,0x00,0x01,0xc7,0x01,0x00
};
banked(startup_bank.data) const u8 nt_warning[] = {
    0x01,0x00,0x01,0xfe,0x00,0x01,0x0c,0x57,0x41,0x52,0x4e,0x49,0x4e,0x47,0x21,0x00,
    0x01,0x31,0x54,0x48,0x49,0x53,0x00,0x42,0x52,0x41,0x4e,0x43,0x48,0x00,0x49,0x53,
    0x00,0x46,0x4f,0x52,0x00,0x01,0x0d,0x54,0x45,0x53,0x54,0x49,0x4e,0x47,0x00,0x54,
    0x48,0x45,0x00,0x4c,0x4c,0x56,0x4d,0x2d,0x4d,0x4f,0x53,0x00,0x01,0x0b,0x43,0x4f,
    0x4d,0x50,0x49,0x4c,0x45,0x52,0x2e,0x00,0x01,0x36,0x41,0x00,0x4c,0x4f,0x54,0x00,
    0x4f,0x46,0x00,0x54,0x48,0x49,0x4e,0x47,0x53,0x00,0x41,0x52,0x45,0x00,0x01,0x0c,
    0x55,0x4e,0x46,0x49,0x4e,0x49,0x53,0x48,0x45,0x44,0x00,0x4f,0x52,0x00,0x42,0x52,
    0x4f,0x4b,0x45,0x4e,0x00,0x01,0x0b,0x41,0x4e,0x44,0x00,0x57,0x49,0x4c,0x4c,0x00,
    0x43,0x52,0x41,0x53,0x48,0x21,0x01,0x02,0x00,0x01,0x8d,0x50,0x52,0x45,0x53,0x53,
    0x00,0x41,0x00,0x54,0x4f,0x00,0x43,0x4f,0x4e,0x54,0x49,0x4e,0x55,0x45,0x2e,0x01,
    0x02,0x00,0x01,0xfe,0x00,0x01,0x10,0x50,0x01,0x02,0x10,0x00,0x01,0x03,0x05,0x05,
    0x00,0x01,0x0c,0x04,0x05,0x01,0x02,0x00,0x01,0x19,0x01,0x00
};

banked(startup_bank.data) 
    const char str_ripsave[] = "SAVE FILE HAS BEEN ERASED.";

banked(startup_bank.func) void state_startup(){
    famistudio_music_stop();

    // enable music
    se_post_nmi_ptr = se_music_update;

    // decompress graphics
    se_vram_address(0);
    se_memory_fill((void*)0x2007,0,256);
    se_vram_donut_decompress(chr_menu_font_pusab, chr_bank_0);
    se_vram_donut_decompress(chr_menu_tfdlogo, chr_bank_0);

    // decompress tilemap
    se_vram_address(0x2000);
    se_vram_unrle(nt_startup,0);

    // set the palette
    se_set_palette_background(pal_startup);

    

    se_set_palette_brightness_all(0);
    se_turn_on_rendering();

    
    // fade in, play boot sound, wait, fade out
    se_wait_frames(8);
    se_fade_palette_to(0,4);
    se_wait_frames(8);

    se_sfx_play(sfx_boot,0);
    
    se_set_palette_brightness_all(5);
    se_wait_frames(5);
    se_set_palette_brightness_all(4);
    se_wait_frames(85);

    se_fade_palette_to(4,0);
    se_turn_off_rendering();


    // check if player 1 is holding SELECT
    if(joypad1.select) {
        se_sfx_play(sfx_explode_11,0);
        se_vram_address(0x2000);
        se_memory_fill((void*)0x2007,0,0x3c0);
        se_memory_fill((void*)0x6000,0,0x2000);
        
        se_string_vram_buffer(str_ripsave, nametable_address_A(4,14));

        se_turn_on_rendering();
        se_fade_palette_to(0,4);

        se_wait_frames(180);

        se_fade_palette_to(4,0);
        se_turn_off_rendering();
    }

    se_set_palette_background(pal_warning);

    se_vram_address(0x2000);
    se_vram_unrle(nt_warning,0);

    se_set_palette_color(0,0x11);
    se_set_palette_color(1,0x0f);

    se_turn_on_rendering();
    se_fade_palette_to(0,4);

    se_music_play(song_scheming_weasel);

    u8 song = 0;

    while(1){
        se_wait_vsync();

        if(joypad1.press_right) {
            ++song;
            if(song == song_max) song = 0;
            se_music_play(song);
        }
        if(joypad1.press_a){
            se_sfx_play(sfx_quitsound_01,0);
            se_fade_palette_to(4,0);

            gamestate = 0x01;
            break;
        }
    }


    //gamestate = 0xff;
    return;
}





banked(startup_bank.data) const u8 pal_credits[16]={ 
    0x11,0x0f,0x10,0x30,
    0x11,0x0f,0x2a,0x39,
    0x11,0x28,0x17,0x0f,
    0x11,0x11,0x21,0x31
};
banked(startup_bank.data) const u8 nt_credits[]={
0x04,0x01,0x04,0x3f,0x03,0x03,0x0e,0x0f,0x10,0x08,0x00,0x04,0x13,0x09,0x10,0x0e,
0x0f,0x03,0x03,0x02,0x02,0x1e,0x1f,0x0c,0x00,0x04,0x02,0x80,0x81,0x82,0x83,0x84,
0x85,0x86,0x87,0x88,0x89,0x82,0x83,0x82,0x8b,0x8c,0x8d,0x00,0x04,0x02,0x0d,0x1e,
0x1f,0x02,0x02,0x0e,0x0f,0x0c,0x18,0x00,0x04,0x03,0x90,0x91,0x92,0x93,0x94,0x95,
0x96,0x97,0x98,0x99,0x92,0x93,0x9a,0x9b,0x9c,0x9d,0x00,0x04,0x03,0x18,0x0d,0x0e,
0x0f,0x1e,0x1f,0x08,0x00,0x04,0x04,0xa0,0xa1,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,0xa8,
0xa9,0xa2,0xa3,0xaa,0xab,0xac,0xad,0x00,0x04,0x04,0x09,0x1e,0x1f,0x10,0x0c,0x00,
0x04,0x1b,0x0d,0x10,0x18,0x00,0x04,0x04,0x41,0x4e,0x00,0x55,0x4e,0x4f,0x46,0x46,
0x49,0x43,0x49,0x41,0x4c,0x00,0x44,0x45,0x4d,0x41,0x4b,0x45,0x00,0x04,0x04,0x18,
0x00,0x04,0x05,0x4f,0x46,0x00,0x47,0x45,0x4f,0x4d,0x45,0x54,0x52,0x59,0x00,0x44,
0x41,0x53,0x48,0x00,0x46,0x4f,0x52,0x00,0x04,0x0c,0x54,0x48,0x45,0x00,0x46,0x41,
0x4d,0x49,0x43,0x4f,0x4d,0x2f,0x4e,0x45,0x53,0x00,0x42,0x59,0x00,0x04,0x12,0x54,
0x46,0x44,0x53,0x4f,0x46,0x54,0x3a,0x00,0x04,0x2d,0x55,0x53,0x45,0x52,0x53,0x4e,
0x49,0x50,0x45,0x52,0x00,0x04,0x02,0x46,0x49,0x43,0x55,0x53,0x48,0x4f,0x55,0x53,
0x45,0x50,0x4c,0x41,0x4e,0x54,0x00,0x04,0x03,0x4b,0x41,0x4e,0x44,0x4f,0x57,0x4f,
0x4e,0x54,0x55,0x00,0x04,0x09,0x56,0x49,0x4b,0x52,0x49,0x4e,0x4f,0x58,0x00,0x04,
0x03,0x41,0x4c,0x45,0x58,0x4d,0x55,0x53,0x48,0x00,0x04,0x0a,0x5a,0x45,0x4e,0x49,
0x54,0x48,0x33,0x30,0x32,0x00,0x04,0x03,0x53,0x45,0x41,0x47,0x4c,0x4f,0x57,0x49,
0x4e,0x47,0x50,0x52,0x4f,0x00,0x04,0x06,0x4a,0x52,0x4f,0x57,0x45,0x42,0x4f,0x59,
0x00,0x04,0x03,0x43,0x52,0x41,0x46,0x54,0x59,0x00,0x4a,0x55,0x4d,0x50,0x45,0x52,
0x00,0x04,0x04,0x45,0x4c,0x41,0x4e,0x47,0x45,0x4c,0x33,0x37,0x38,0x00,0x04,0x03,
0x41,0x4c,0x45,0x46,0x55,0x4e,0x4b,0x59,0x00,0x04,0x0e,0x4a,0x41,0x45,0x5a,0x55,
0x00,0x04,0x03,0x4b,0x41,0x57,0x41,0x49,0x49,0x44,0x41,0x57,0x4e,0x00,0x04,0x07,
0x4e,0x45,0x52,0x44,0x42,0x4f,0x59,0x36,0x32,0x38,0x00,0x04,0x46,0x41,0x4e,0x44,
0x00,0x4d,0x41,0x4e,0x59,0x2c,0x00,0x4d,0x41,0x4e,0x59,0x00,0x4f,0x54,0x48,0x45,
0x52,0x53,0x2e,0x00,0x04,0x04,0x19,0x00,0x00,0x46,0x41,0x52,0x00,0x54,0x4f,0x4f,
0x00,0x4d,0x41,0x4e,0x59,0x00,0x54,0x4f,0x00,0x4c,0x49,0x53,0x54,0x00,0x48,0x45,
0x52,0x45,0x2e,0x00,0x00,0x19,0x10,0x1c,0x00,0x04,0x1b,0x1d,0x10,0x0e,0x0f,0x08,
0x00,0x04,0x19,0x09,0x0e,0x0f,0x1e,0x1f,0x1c,0x19,0x00,0x04,0x03,0x47,0x45,0x4f,
0x4d,0x45,0x54,0x52,0x59,0x00,0x44,0x41,0x53,0x48,0x00,0x49,0x53,0x00,0x04,0x03,
0x19,0x1d,0x1e,0x1f,0x03,0x03,0x0e,0x0f,0x1c,0x00,0x00,0x24,0x32,0x30,0x31,0x33,
0x00,0x52,0x4f,0x42,0x54,0x4f,0x50,0x00,0x47,0x41,0x4d,0x45,0x53,0x00,0x00,0x1d,
0x0e,0x0f,0x03,0x03,0x02,0x02,0x1e,0x1f,0x10,0x08,0x00,0x04,0x13,0x09,0x10,0x1e,
0x1f,0x02,0x02,0x01,0x04,0x3f,0x70,0x30,0x50,0x04,0x03,0xc0,0xd0,0x3d,0x05,0x04,
0x05,0xc7,0x00,0x04,0x17,0x30,0x00,0x04,0x05,0xc0,0x7d,0x30,0x00,0xa0,0x04,0x02,
0xe0,0xd7,0x00,0x04,0x07,0x04,0x00
};

banked(startup_bank.func) void state_credits() {
    se_vram_address(0x0000);
    se_vram_donut_decompress(chr_menu_global, chr_bank_0);
    se_vram_donut_decompress(chr_menu_font_pusab, chr_bank_0);
    se_vram_donut_decompress(chr_menu_famidash, chr_bank_0);

    // enable music
    se_post_nmi_ptr = se_music_update;
    se_music_play(song_didnt_realize_it_credits_mix_wip_in_game);

    se_vram_address(0x2000);
    se_vram_unrle(nt_credits,0);

    se_set_palette_background(pal_credits);

    se_turn_on_rendering();
    se_fade_palette_to(0,4);
    
    se_wait_frames(240);

    se_fade_palette_to(4,0);
    gamestate = 0x10;
    famistudio_music_stop();
}

file(samples_0, 1) = {
    #embed "./samples/gofuckyourself0.pcm"
};
file(samples_1, 2) = {
    #embed "./samples/gofuckyourself1.pcm"
};
file(samples_2, 3) = {
    #embed "./samples/geometryDash2.pcm"
};